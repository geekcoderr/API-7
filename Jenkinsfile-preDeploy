node {
    stage('SCM UPDATE') {
        if (!fileExists('.git')) {
            echo 'GIT REPO DOESN\'T EXIST'
            sh 'git clone -b main https://github.com/geekcoderr/API-7 .'
        } else {
            echo 'GIT REPO ALREADY EXISTS'
            checkout scm
        }
    }

    stage('Print Environment Variables') {
        withCredentials([usernamePassword(credentialsId: 'docker-credential-id-geekcoderr', usernameVariable: 'uname', passwordVariable: 'pass')]) {
            sh 'curl -u $uname:$pass https://hub.docker.com/'
        }
    }
}
